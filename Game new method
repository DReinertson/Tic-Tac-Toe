<!DOCTYPE HTML>
<html>
<head>
<style>
  html{
  background-color: tan;
}

#all{
  display: flex;
  width: 100vw;
  height: 100vh;
  justify-content: center;
  align-items: center;
}

.overlay{
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  background-color: black;
  position: absolute;
  color: white;
  display:flex;
  z-index: 10;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  font-size: 6vw;
}
.player-choice{
  font-size: 6vw;
  color: white;
}
.letter-overlay{
  text-align: center;
  display: flex;
  position: absolute;
  background-color: black;
  color: white;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 9;
}
.letter-choice-title{
  font-size: 8vw;
  margin: 1vw;
}
.letter-choice{
  color: white;
  font-size: 8vw;
  margin: 0 auto auto auto;
  }
button{
  border: none;
  background: none;
  cursor: pointer;
}

#flexbox{
  position: relative;
  display: flex;
  flex-wrap: wrap;
  background-color: gray;
  width: 60vw;
  padding: 1vw;  
  justify-content: center;
  align-items: center;
  
}

.play{
  background-color: white;
  width: 19vw;
  flex-wrap: wrap;
  border: solid black 1px;
  height: 19vw;
}

#title{
  display: flex;
  width: 57vw;
  border: none;
  font-size: 5vw;
  justify-content: center;
  text-align: center;
  padding: 2vw;
}

@media screen and (min-width: 1100px) {
  
  #flexbox{
  display: flex;
  flex-wrap: wrap;
  background-color: gray;
  width: 35vw;
  padding: 1vw;  
  justify-content: center;
  align-items: center;
  
}
  
  .player-choice{
    font-size: 4vw;
  }
  .letter-choice-title{
    font-size: 5vw;
  }
  .letter-choice{
    font-size: 5vw;
  }

.play{
  background-color: white;
  width: 11vw;
  flex-wrap: wrap;
  border: solid black 1px;
  height: 11vw;
}

#title{
  display: flex;
  width: 35vw;
  border: none;
  font-size: 2vw;
  justify-content: center;
  text-align: center;
  padding: 1vw;
}
  
}
</style>
</head>
<body>
<div class = "flex-container" id = 'all'>
<div class = "flex-container" id = 'flexbox'>
  <div class = "overlay">
    <div class = 'player-choice' id = 'player-choice'>1 Player</div>
    <div class = 'player-choice' id = 'player-choice'>2 Player</div>
  </div>
  <div class = "letter-overlay">
    <div class = "letter-choice-title">Choose Your Letter</div>
    <div class = "letter-choice" id = "letter-choice">X</div>
    <div class = "letter-choice" id = "letter-choice">O</div>
  </div>
  <div class = "flex-item" id = "title">
    <div class = "title">Tic-Tac-Toe</div>
  </div>
  <div class = "flex-item play" id = "top-left">1</div>
  <div class = "flex-item play" id = "top-mid">2</div>
  <div class = "flex-item play" id = "top-right">3</div>
  <div class = "flex-item play" id = "mid-left">4</div>
  <div class = "flex-item play" id = "mid-mid">5</div>
  <div class = "flex-item play" id = "mid-right">6</div>
  <div class = "flex-item play" id = "bot-left">7</div>
  <div class = "flex-item play" id = "bot-mid">8</div>
  <div class = "flex-item play" id = "bot-right">9</div>
</div>
</div>
<script>
//The easiest way would be to choose a spot at random. Gather available spaces and choose it at random, using a grid system, posting in [x,y] coordinates. 
//Need to make a couple different methods: 
//1. play method: where if it is your turn, if you click in one of the play divs, it puts the appropriate character in it. 
//2. check method: Checks to see if there are three in a row, if so, game over and that play wins. Will use selector.each() function to check each div, will need to figure out most effective way to check if divs are side-by-side (i.e. can make 3 in a row).
//3. Will need to make a couple different objects? Player 1/2 and computer. Can use while loop to check who's turn it is. Not allowing player 1 moving while computer is about to play for exampler. 
// Will use selector.each() function to check each

var player = new Object();
player.counterTop = 0;
player.counterMidx = 0;
player.counterMidy = 0;
player.counterBot = 0;
player.counterLeft = 0;
player.counterRight = 0;
var opponent = new Object();
opponent.counterTop = 0;
opponent.counterMidx = 0;
opponent.counterMidy = 0;
opponent.counterBot = 0;
opponent.counterLeft = 0;
opponent.counterRight = 0;
var turn = 'player';
var available = ["top-left", "top-mid", "top-right", "mid-left", "mid-mid", "mid-right", "bot-left", "bot-mid", "bot-right"];

var winning = [["top-left", "top-mid", "top-right"], ["top-left", "mid-left", "bot-left"], ["top-left", "mid-mid", "bot-right"], ["top-mid", "mid-mid", "bot-mid"], ["top-right", "mid-mid", "bot-left"], ["top-right", "mid-right", "bot-right"], ["mid-left", "mid-mid", "mid-right"], ["bot-left", "bot-mid", "bot-right"]];

//Will choose how many players via button click
$('.player-choice').on("click touchend", function(){
  $(".overlay").hide();
  if (this.id == "1-player"){
    player.name = "player";
    opponent.name = "computer";
  }
  if (this.id == "2-player"){
    player.name = 'player-1';
    opponent.name = 'player-2'
  }  
})

//Will choose which letter between X and O
$('.letter-choice').on("click touchend", function(){
  $(".letter-overlay").hide();
  console.log(this.id);
  player.letter = this.id;
  if (this.id == 'X'){
    opponent.letter = 'O';
  }
  else {
    opponent.letter = 'X';
  }
  console.log('player:', player);
  console.log('opponent:', opponent);
  })
  





  //Will run check before moves occur.
  
  $('.play').on("click touchend", function(){
    
    //If div already contains letter, do nothing. 
    if (document.getElementById(this.id).innerHTML == "X" || document.getElementById(this.id).innerHTML == "O"){
      console.log("try again");
      return;
    }
    
    
    if (turn == "player"){
      console.log("playing player letter", player.letter);
      document.getElementById(this.id).innerHTML = player.letter;
      removeIndex(this.id);
      addCounter(this.id, player);
      console.log('available:', available);
      turn = "opponent";
      console.log("player:", player);
      if (opponent.name == "computer"){
        //computerTurn() will have the letter placement and switch turn back to player within it. Will also check field to see if 3 in a row.
        computerTurn();
        return;
      }
      return;
    }
    if (turn == "opponent" && opponent.name == "player-2"){
      console.log('playing Opponent letter', opponent.letter);
      document.getElementById(this.id).innerHTML = opponent.letter;
      addCounter(this.id, opponent);
      removeIndex(this.id);
      console.log('available after opponent:', available);
      console.log('opponent:', opponent);
      turn = 'player';
      console.log('turn changed from opponent', turn);
      return;
    }
    //will run check here, after 
  })

function computerTurn(){
  console.log('computer making a move');
  //produce random integer that will be used to make computer's move on board. 
  var move = available[Math.floor(Math.random() * available.length)]
  console.log('move:', move);
  document.getElementById(move).innerHTML = opponent.letter;
  addCounter(move, opponent);
  removeIndex(move);
  console.log('computer:', opponent);
  turn = "player";
  return;
}

function removeIndex(divId){
  available.splice((available.indexOf(divId)), 1);  
}

function check(playerArray){
  
  //Could have nested for loops, to check within each array that's nested in the "winning" array. Would be n^2
  //Could create IDs that have grid coordinates and use that to check if adjecent squares are filled? But how to change DIV id to adjecent square?
  //For non-diagonals, could check player/opponent array for keywords (top, left, bot, right, mid), if there are 3 of them in the array, then win. Not sure how to check for diagonals in this case. Seems inefficient to have a rule for checking horizontals/verticals and a separate for diagonals. 
  //In terms of key-words, could just have a counter for keywords as space is chosen? If counter gets to 3, player/opponent wins? For diagonal, if each counter has 1, check to see if it's proper diagonal and not top-left, mid-right, bot-mid, for example. Create switch-case for each one to add to player/opponent.counter?
  
}

function addCounter(divId, object){
  console.log('divId:', divId, 'object:', object);
  switch(divId){
    case 'top-left':
      object.counterTop += 1;
      object.counterLeft += 1;
      break;
    case 'top-mid':
      object.counterTop += 1;
      object.counterMidy += 1;
      break;
    case 'top-right':
      object.counterTop += 1;
      object.counterRight += 1;
      break;
    case 'mid-left':
      object.counterMidx += 1;
      object.counterLeft += 1;
      break;
    case 'mid-mid':
      object.counterMidx += 1;
      object.counterMidy += 1;
      break;
    case 'mid-right':
      object.counterMidx += 1;
      object.counterRight += 1;
      break;
    case 'bot-left':
      object.counterBot += 1;
      object.counterLeft += 1;
      break;
    case 'bot-mid':
      object.counterMidy += 1;
      object.counterBot += 1;
      break;
    case 'bot-right':
      object.counterRight += 1;
      object.counterBot += 1;
      break;
  }
}
</script>
</body>
</html>
